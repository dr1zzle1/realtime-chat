{"version":3,"sources":["utils/consts.js","components/Navbar.jsx","components/Loader.js","components/Chat.jsx","routes.js","components/Login.jsx","components/AppRouter.js","App.js","index.js"],"names":["LOGIN_ROUTE","CHAT_ROUTE","Navbar","auth","React","useContext","Context","useAuthState","user","AppBar","color","position","Toolbar","variant","Grid","container","justify","Button","onClick","signOut","to","Loader","Container","style","height","window","innerHeight","alignItems","direction","class","Chat","firestore","useState","value","setValue","useCollectionData","collection","orderBy","messages","loading","sendMessage","a","add","uid","displayName","photoURL","text","createdAt","firebase","FieldValue","serverTimestamp","width","border","overflowY","map","message","margin","marginLeft","Avatar","src","TextField","onChange","e","target","fullWidth","maxRows","publicRoutes","path","Component","login","provider","GoogleAuthProvider","signInWithPopup","console","log","background","Box","p","privateRoutes","AppRouter","component","exact","App","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","createContext","ReactDOM","render","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.93ef8861.chunk.js","sourcesContent":["export const LOGIN_ROUTE = '/login';\r\nexport const CHAT_ROUTE = '/chat';\r\n","import React from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { Button, Grid } from '@material-ui/core';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { LOGIN_ROUTE } from '../utils/consts';\r\nimport { useAuthState } from 'react-firebase-hooks/auth';\r\nimport { Context } from '..';\r\n\r\nconst Navbar = () => {\r\n  const { auth } = React.useContext(Context);\r\n  const [user] = useAuthState(auth);\r\n  return (\r\n    <AppBar color=\"secondary\" position=\"static\">\r\n      <Toolbar variant=\"dense\">\r\n        <Grid container justify={'flex-end'}>\r\n          {user ? (\r\n            <Button onClick={() => auth.signOut()} variant={'outlined'}>\r\n              Выйти\r\n            </Button>\r\n          ) : (\r\n            <NavLink to={LOGIN_ROUTE}>\r\n              <Button variant={'outlined'}>Логин</Button>\r\n            </NavLink>\r\n          )}\r\n        </Grid>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","import { Container, Grid } from '@material-ui/core';\r\nimport React from 'react';\r\nimport '../App.css';\r\n\r\nconst Loader = () => {\r\n  return (\r\n    <Container>\r\n      <Grid\r\n        container\r\n        style={{ height: window.innerHeight - 50 }}\r\n        alignItems=\"center\"\r\n        justify=\"center\">\r\n        <Grid container alignItems=\"center\" direction=\"column\">\r\n          <div class=\"lds-ring\">\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n          </div>\r\n        </Grid>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n};\r\nexport default Loader;\r\n","import { Avatar, Button, Container, Grid, TextField } from '@material-ui/core';\r\nimport React, { useState } from 'react';\r\nimport { useAuthState } from 'react-firebase-hooks/auth';\r\nimport { Context } from '..';\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\r\nimport Loader from './Loader';\r\nimport firebase from 'firebase/compat';\r\n\r\nconst Chat = () => {\r\n  const { auth, firestore } = React.useContext(Context);\r\n  const [user] = useAuthState(auth);\r\n  const [value, setValue] = useState('');\r\n  const [messages, loading] = useCollectionData(\r\n    firestore.collection('messages').orderBy('createdAt'),\r\n  );\r\n\r\n  const sendMessage = async () => {\r\n    firestore.collection('messages').add({\r\n      uid: user.uid,\r\n      displayName: user.displayName,\r\n      photoURL: user.photoURL,\r\n      text: value,\r\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n    });\r\n    setValue('');\r\n  };\r\n  if (loading) {\r\n    return <Loader />;\r\n  }\r\n  return (\r\n    <Container>\r\n      <Grid container style={{ height: window.innerHeight - 50 }} justify=\"center\">\r\n        <div\r\n          style={{\r\n            width: '80%',\r\n            height: '70vh',\r\n            border: '1px solid gray',\r\n            overflowY: 'auto',\r\n          }}>\r\n          {messages.map((message) => (\r\n            <div\r\n              style={{\r\n                margin: 10,\r\n                border: user.uid === message.uid ? '2px solid green' : '2px solid green',\r\n                marginLeft: user.uid === message.uid ? 'auto' : '10px',\r\n                width: 'fit-content',\r\n              }}>\r\n              <Grid container>\r\n                <Avatar src={message.photoURL} />\r\n                <div>{message.displayName}</div>\r\n              </Grid>\r\n              <div>{message.text}</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <Grid\r\n          container\r\n          direction=\"column\"\r\n          alignItems=\"flex-end\"\r\n          style={{\r\n            width: '80%',\r\n          }}>\r\n          <TextField\r\n            value={value}\r\n            onChange={(e) => setValue(e.target.value)}\r\n            fullWidth\r\n            maxRows={2}\r\n            variant=\"outlined\"\r\n          />\r\n          <Button onClick={sendMessage} variant=\"outlined\">\r\n            Отправить\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import Chat from './components/Chat';\r\nimport Login from './components/Login';\r\nimport { CHAT_ROUTE, LOGIN_ROUTE } from './utils/consts';\r\n\r\nexport const publicRoutes = [\r\n  {\r\n    path: LOGIN_ROUTE,\r\n    Component: Login,\r\n  },\r\n];\r\n\r\nexport const privateRoutes = [\r\n  {\r\n    path: CHAT_ROUTE,\r\n    Component: Chat,\r\n  },\r\n];\r\n","import { Box, Button, Container, Grid } from '@material-ui/core';\r\nimport React, { useContext } from 'react';\r\nimport { Context } from '..';\r\nimport firebase from 'firebase/compat';\r\n\r\nconst Login = () => {\r\n  const { auth } = useContext(Context);\r\n\r\n  const login = async () => {\r\n    const provider = new firebase.auth.GoogleAuthProvider();\r\n    const { user } = await auth.signInWithPopup(provider);\r\n    console.log(user);\r\n  };\r\n  return (\r\n    <Container>\r\n      <Grid\r\n        container\r\n        style={{ height: window.innerHeight - 50 }}\r\n        alignItems=\"center\"\r\n        justify=\"center\">\r\n        <Grid\r\n          style={{ width: 400, background: 'lightgray' }}\r\n          container\r\n          alignItems=\"center\"\r\n          direction=\"column\">\r\n          <Box p={5}>\r\n            <Button onClick={login} variant=\"outlined\">\r\n              Войти с помощью Google\r\n            </Button>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport { Redirect, Route, Switch } from 'react-router';\r\nimport { privateRoutes, publicRoutes } from '../routes';\r\nimport { CHAT_ROUTE, LOGIN_ROUTE } from '../utils/consts';\r\nimport { useAuthState } from 'react-firebase-hooks/auth';\r\nimport { Context } from '..';\r\n\r\nconst AppRouter = () => {\r\n  const { auth } = React.useContext(Context);\r\n  const [user] = useAuthState(auth);\r\n  return user ? (\r\n    <Switch>\r\n      {privateRoutes.map(({ path, Component }) => (\r\n        <Route key={path} path={path} component={Component} exact={true} />\r\n      ))}\r\n      <Redirect to={CHAT_ROUTE} />\r\n    </Switch>\r\n  ) : (\r\n    <Switch>\r\n      {publicRoutes.map(({ path, Component }) => (\r\n        <Route key={path} path={path} component={Component} exact={true} />\r\n      ))}\r\n      <Redirect to={LOGIN_ROUTE} />\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default AppRouter;\r\n","import { BrowserRouter } from 'react-router-dom';\nimport './App.css';\nimport Navbar from './components/Navbar';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport AppRouter from './components/AppRouter';\nimport { Context } from './';\nimport { useContext } from 'react';\nimport Loader from './components/Loader';\n\nfunction App() {\n  const { auth } = useContext(Context);\n  const [user, loading, error] = useAuthState(auth);\n  if (loading) {\n    return <Loader />;\n  }\n  return (\n    <BrowserRouter>\n      <Navbar />\n      <AppRouter />\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React, { createContext } from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport firebase from 'firebase/compat';\nimport 'firebase/firestore';\nimport 'firebase/auth';\n\nfirebase.initializeApp({\n  apiKey: 'AIzaSyB87JuRYaOOsFy0FtvJ8zELyUQmSENRGKc',\n  authDomain: 'realtime-chat-57695.firebaseapp.com',\n  projectId: 'realtime-chat-57695',\n  storageBucket: 'realtime-chat-57695.appspot.com',\n  messagingSenderId: '107095459653',\n  appId: '1:107095459653:web:94694ccf952352419f202c',\n  measurementId: 'G-M8E2CEDVT4',\n});\n\nexport const Context = createContext(null);\n\nconst auth = firebase.auth();\nconst firestore = firebase.firestore();\n\nReactDOM.render(\n  <Context.Provider\n    value={{\n      firebase,\n      auth,\n      firestore,\n    }}>\n    <App />\n  </Context.Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}